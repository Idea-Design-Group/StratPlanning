function initializeInputs(n){$(n).find(".m-select2").select2();$(n).find(".tag-select").select2({tags:!0,tokenSeparators:[","]});$(n).find(".datepicker").datepicker();$(n).find(".select2-without-search").select2({minimumResultsForSearch:Infinity})}function deleteConfirm(){return swal({icon:"warning",title:"Are you sure?",buttons:{confirm:{text:"Yes",value:!0,visible:!0,className:"btn btn-sp m-btn",closeModal:!0},cancel:{text:"No",value:!1,visible:!0,className:"btn btn-secondary m-btn",closeModal:!0}}})}function submitConfirm(n){return swal({icon:"warning",title:"Are you sure?",text:n,buttons:{confirm:{text:"Yes",value:!0,visible:!0,className:"btn btn-sp m-btn",closeModal:!0},cancel:{text:"No",value:!1,visible:!0,className:"btn btn-secondary m-btn",closeModal:!0}}})}function filePreviewRemoveHandler(n){removeFilePreview($(n.target).parent())}function removeFilePreview(n){let t=$(n).parent();t.find(".dz-message").hide();deleteConfirm().then(function(i){i&&n.remove();t.find(".dz-preview").length==0&&t.find(".dz-message").show()})}function notify(n,t,i=5){$.notify({message:n},{type:t,delay:i*1e3,placement:{from:"bottom",align:"right"},offset:{x:20,y:100}})}$(document).ready(function(){initializeInputs(document);$(".sp-tooltip").tooltip();$.fn.dataTable.ext.order["dom-select"]=function(n,t){return this.api().column(t,{order:"index"}).nodes().map(function(n){return $("select",n).val()})};$.fn.dataTable.ext.order["dom-input"]=function(n,t){return this.api().column(t,{order:"index"}).nodes().map(function(n){return $("input",n).val()})};$(".user-submit-btn").click(submitConfirm);$(".dropzone-sp").dropzone({addRemoveLinks:!0,removedfile:function(n){let t=$(n.previewElement);removeFilePreview(t)},previewTemplate:`
            <div class="dz-preview dz-file-preview dz-processing dz-error dz-complete">  
                <div class="dz-image">
                    <img data-dz-thumbnail="">
                </div>  
                <div class="dz-details">    
                    <div class="dz-size">
                        <span data-dz-size=""><strong></strong> KB</span>
                    </div>    
                    <div class="dz-filename">
                        <span data-dz-name=""></span>
                    </div>  
                    </div>  
                    <div class="dz-progress">
                        <span class="dz-upload" data-dz-uploadprogress=""></span>
                    </div>   
                </div>
                <a class="dz-remove" href="javascript:undefined;" data-dz-remove="">Remove file</a>
            </div>`}).droppable({accept:".draggable-file",drop:function(n,t){n.preventDefault();let i=$(t.draggable).html();$(this).find(".dz-message").hide();$(this).append(`<div class="dz-preview dz-file-preview dz-processing dz-error dz-complete">  
                <div class="dz-image">
                    <img data-dz-thumbnail=""/>
                </div>  
                <div class="dz-details">      
                    <div class="dz-filename">
                        <span data-dz-name="">${i}</span>
                    </div>  
                    <div class="dz-progress">
                        <span class="dz-upload" data-dz-uploadprogress=""></span>
                    </div>   
                </div>
                <a class="dz-remove" href="javascript:undefined;" onclick="filePreviewRemoveHandler(event)" data-dz-remove="">Remove file</a>
            </div>`)}}).addClass("dropzone");$(".draggable-file").draggable({revert:"invalid",containment:"document",helper:"clone",cursor:"move"});$(".table-row-delete").click(function(n){n.preventDefault();deleteConfirm()})});var canPing=function(){let n=null;return function(){if(n==null)return n=new Date,!0;let t=new Date,i=t.getTime()-n.getTime();return i>=6e4?(n=t,!0):!1}}();$.sessionTimeout({message:"Your session will be expired in a minute.",ignoreUserActivity:!1,keepAlive:!1,logoutUrl:"/Auth/Logout",redirUrl:"/Auth/Login",countdownBar:!0,onStart:function(n){console.log("onStart");canPing()&&(console.log("pinged"),$.ajax({url:"/Auth/Ping",method:"post",success:function(t,i,r){r.status==200&&(n.redirAfter=t.expirationSeconds*1e3,n.warnAfter=t.expirationSeconds>60?(t.expirationSeconds-60)*1e3:0);console.log(n)},error:function(n){n.status==401?notify("Authorization failed","danger",5):notify("An error occured during ping","danger",5)}}))}});